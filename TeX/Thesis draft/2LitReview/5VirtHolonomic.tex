Virtual holonomic constraints are a method of forcing a nonholonomic system (that is, a system whose state evolution is subject to differential constraints) to adhere to a path through configuration space through the application of feedback control. This method of control is demonstrated in \cite{shiriaev2005constructive} as a tool for orbital stabilisation of underactuated nonlinear systems. The form of the zero dynamics of a virtually constrained physical system are presented. This formulation describes the dynamics of a \textit{phase variable} to which all other coordinates are synchronised, under the assumption that the feedback control is perfectly regulated. Shiriaev et al prove that this equation has a general integral of motion and utilise it to reduce the complexity of the dynamics to allow for a more easily solvable control problem. 

In \cite{freidovich2009passive}, this property is used in a search for periodic cycles in the gait of a 2DOF compass-gait walker, which is otherwise a very computationally expensive task due to the impulsive impact conditions and nonlinearities in the dynamics. In \cite{freidovich2008periodic}, orbitally stable periodic motions of a two-link underactuated robot called the Pendubot were generated, again by exploiting this property. \cite{canudas2004concept} surveys the use of virtual constraints in balancing and walking control systems in robots, particularly the Rabbit 7-DOF walker. Much of the uses of virtual constraints arise from the reduced dynamics availed by considering only the phase variable and are simplified further by the existence of the integral. Note, however, that the integral is not guaranteed to exist under all conditions.

In \cite{manchester2011stable} and \cite{manchester13planning}, the integral is slightly rearranged to yield a partial closed-form solution which relates the velocity of the phase variable to the phase variable itself. This allows for a partial solution of the zero dynamics to be computed \textit{off-line}, greatly simplifying the required real-time computation for path planning and control. Along with this performance outcome, using virtual constraints as primitives offers two other advantages; they specify kinematic paths thus much of the reasoning applied to classical path planning problems may be applied, and the partial closed form solution yields an affine structure which affords an intelligent ordering. The existence of a clear ordering between primitives is significant, since it allows for much more efficient searches through sets of primitives (See Section~\ref{sec:selection}).

\subsection{Hybrid zero dynamics}
Understanding the motion of underactuated dynamic walkers subject to virtual constraints requires the analysis of the \textit{hybrid zero dynamics}. This is the combination of continuous phases, where the motion is defined by a choice of virtual constraint, interspersed with impacts, which represent a discontinuity in the evolution of the state space. This approach was introduced in \cite{grizzle2001asymptotically}, proving that the use of virtual constraints allowed for a computationally tractable evaluation of asymptotic stability and for the construction of a stabilising controller. In \cite{westervelt2003hybrid}, exponentially stable walking controllers for general underactuation degree one planar walkers were designed. Conditions were derived for periodic cycles that ensure that the impacts do not shift the system off the hybrid zero dynamics manifold, known as the \textit{invariance} of the zero dynamics. 

Fast dynamic walking of a multiple-degree underactuation walker was achieved in \cite{sreenath2011compliant} by the application of full hybrid zero dynamics control schemes. The performance of this control was compared to classical PD control and was shown to be much more efficient and yields a much more accurate realisation of the desired virtual constraints. These benefits of the control scheme over PD control were very significant in achieving efficient rapid locomotion. 

The controller strategies employed and suggested in this thesis work rely upon a HZD controller to ensure that, as in \cite{sreenath2011compliant}, the desired virtual constraints are reproduced faithfully. In addition, care must be taken in the construction of the motion primitives to ensure that the hybrid zero dynamics remain invariant. This presents a somewhat more difficult challenge than that discussed in the literature. In \cite{westervelt2007feedback}, a method by which switching between periodic gaits which satisfies the invariance condition was derived, however this relied upon the existence and maintenance of the periodic constraints, which is not applicable to a context in which selection of a different constraint is expected for each footstep.

\subsection{Selection of motion primitives}\label{sec:selection}
In order to use motion primitives in path planning as a way to respond to the upcoming terrain, a rich library of motion primitives is required. Also required is a manner by which one primitive may be chosen over another. In \cite{manchester13planning}, two important results are derived. First, the system must have sufficient energy such that the chosen primitive will complete its specified path and not fall back. This reduces to a simple mathematical check. Second, there is a method for logical ordering of the primitives. Both of these are based upon the concept of a \textit{critical velocity}; the velocity of the phase coordinate as it passes through the \textit{critical point}, the single point of peak potential energy in the system. 

The generation of motion primitives is not well covered in the literature. It is a problem which remains to be properly solved. However, searching through decision trees is a somewhat general problem; it does not simply apply to this instance of searching for appropriate motion primitives. There are a great many techniques of decision tree traversal, such as $\alpha-\beta$ pruning \cite{knuth1976analysis}, Beam search \cite{steinbiss1994improvements} and Hill climbing \cite{goldfeld1966maximization} among many others. The methods employed in \cite{manchester13planning} are a simple backtracking best-first search and a modified best-first search employing an energy heuristic. This is an appropriate choice, since the objective of the algorithm is to find a feasible solution subject to some constraints on energy. The three graph traversal algorithms listed and most others look for some form of optimum solution, which is not well defined in this case. A different type of search may be appropriate based upon some heuristic formulation of an optimum value, however, such a heuristic can trivially inform the best-first search.