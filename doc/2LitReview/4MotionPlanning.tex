\subsection{Motion planning architectures}
In order to be capable of achieving collision-free motion through their environments, mobile robots are required plan their trajectories. In prepared and sterilised spaces, it is possible to achieve this in an entirely ``open-loop'' manner; all motion can be pre-planned and the robot exerts forces and torques to achieve the motion without regard to its state. It is clear that such planning is not robust to unexpected changes in the environment and requires complete knowledge of the system dynamics. This method of motion planning is found in the works of automata dating back as far as the 4th century BC, where Greek mathematician Archytas of Tarentum designed a steam-propelled mechanical bird \cite{winter2007corpus}.

This approach can be improved by the application of feedback control. While the trajectory is still set without any regard to the environment, the control inputs to track the trajectory are adjusted on-line to correct any deviations from the desired trajectory. Therefore, the motion of the mobile robot is made more robust to disturbances and errors in the dynamical model. This control scheme is suitable for robotic systems such as automated manufacturing plants and robots operating under holonomic constraints such as rails where wholly predefining the motion is applicable and safe. However, in general, mobile robots are not expected to remain in carefully prepared environments and so the path that the robot takes must be informed by the terrain through which it travels. Any approach to motion planning in general environments introduces significant complexity, since the goals of the robot may be significantly less clear and the actions required to optimally or even feasibly achieve such goals can prove very difficult to evaluate.

An approach which attempts to address the need to locomote with regard to the environment is the so-called SENSE-PLAN-ACT architecture, as successfully implemented in the Shakey Robot at Stanford Research Institute\cite{shakey1968}. This introduces the important notion of using sensors to gather information about the environment to inform the robot's motion planner, although it remains open-loop planning; there are no means to correct a planned path until the motion is completed. Another limitation of the SENSE-PLAN-ACT architecture used in Shakey is the inability to service multiple concurrent goals. A solution to this limitation which retains the fundamental structure of the architecture is presented in \cite{vere1983planning}; concurrent tasks are scheduled, respecting time constraints and priorities. Planning with such open-loop architectures shall hereupon be labelled \textit{deliberative} planning. Note that deliberative planning can be correctly termed Model Predictive Control (MPC), however contemporary use of MPC typically implies a repeated receding horizon architecture which introduces effective feedback control \cite{camacho2013model}.

In response to the lack of robustness offered by deliberative planning, \textit{reactive} architectures were devised. A compelling architecture based upon Behaviour Based control, known as \textit{subsumption} is proposed in \cite{brooks1986robust}. Brooks' subsumption builds robot behaviour by combining functional blocks whose behaviour may subsume that of lower-level blocks. These functional blocks describe robot behaviours such as following a wall and avoiding collisions. The combination of these simple reactive blocks was shown to be capable of producing a viable walking gait, amongst other high-level behaviours. However, such an architecture is not easily used to service high-level goals. Alternative reactive architectures, such as that proposed in \cite{georgeff1987reactive} include a complex closed-loop interaction between deliberative and reactive components. For example, the high-level planner can be interrupted if a collision is imminent. These allow for high-level goals to be set while also ensuring robustness to environmental or robot state changes. These are extended in \cite{gat1992integrating}, which presents a heterogeneous, asynchronous architecture which allows for a robot with multiple tasks to be controlled in a noisy environment. The asynchrony is important for the robustness of the architecture, using high-level planning to guide the robot's actions, but not control them directly. 

The motion planning algorithm proposed within this thesis work attempts to provide a robust and computationally efficient method of producing stable dynamic walking in underactuated robots. Within the framework of planning architectures, it may be considered to be a functional block which could fit into Brook's subsumption architecture or Gat's heterogeneous, asynchronous planning architecture. It is not a complete solution for robot motion planning in itself; in its current form, this algorithm simply allows for sustained walking in a straight-line path. Clearly, this must be combined with other planning modules, depending on the purpose of the robot.

\subsection{Path planning methods}
Path planning methods define a trajectory through space which is constructed in service of a given set of goals and subject to a set of constraints. The optimal path is typically understood to be that which minimises the energy or time required to complete the motion. However, in many instances, it is understood that finding the true optimal path is computationally intractable and thus methods by which a feasible solution is guaranteed to be found, if one exists, are normally acceptable. Methods which produce a solution more quickly (i.e. are more computationally efficient) or produce paths which more closely resemble optimal solutions are considered more favourable. In practice, most path planning methods establish a compromise between computational efficiency and convergence to the optimal path. 

Conventional approaches to path planning include grid-based searches, which discretise the configuration space and use graph traversal algorithms to compute the optimum path. More computationally efficient methods such as Probabilistic Road Maps \cite{boor1999gaussian} can be used to achieve paths which converge to the optimal path with increasing sampling points. Potential field methods, which assign an attractive ``force'' to the goal pose and a repulsive force to the obstacles, provide a means for avoiding complex geometric collision checks and attempt to place the robot with some reasonable clearance from obstacles \cite{hwang1992potential}. These methods are only directly applicable to fully actuated robots since all that is required is to find a kinematically feasible path through the configuration space. Since underactuated robots are subject to differential constraints, using such methods without significant alterations produces paths which have no guarantee of dynamic feasibility. 

The most direct and obvious way to solve the path planning problem for underactuated robotic walking, therefore, is to pose it as a nonlinear optimisation problem over state and control trajectories. However, since walking motion planning problems are typically high-dimensional, nonsmooth and nonconvex, these methods are very computationally expensive. \cite{tassa2012synthesis} suggests the use of a smooth contact model to avoid the necessity of hybrid representations of dynamics introduced by the impacts. This results in the ability to formulate an unconstrained, continuous trajectory optimisation problem, which is solvable using standard nonlinear optimisation tools. However, with current technology, this formulation still requires minutes of computation time, which is clearly not suitable for real-time trajectory planning. 

Rapidly-expanding Random Trees (RRT) \cite{lavalle2001randomized} provide a method for \textit{kinodynamic} planning; planning trajectories in state space, not just configuration space. This allows for nonholonomic differential constraints such as those present on the underactuated dynamic walker to be considered in the planning algorithm. These trees also better deal with the complexity of high dimensionality to be somewhat mitigated in comparison to gridding approaches. In \cite{frazzoli2002real}, real-time planning was achieved for a helicopter through the use of a modified RRT algorithm. However, for the infinite-dimensional case of planning walking motions, RRTs are not easily applicable. %
\nomenclature[*]{RRT}{Rapdly-expanding Random Trees -- a method of rapid exploration of state space}

Motion primitives provide a means of defining feasible behaviour of the robot and to reduce the search space for the path planning problem. \cite{cohen2011planning} demonstrates the utility of motion primitives for planning the motion of a 7DOF manipulator in cluttered environments. In \cite{frazzoli2005maneuver}, motion primitives are used to produce near-optimal motions in non-linear systems with symmetries, and validated in simulations with a helicopter. The combination of the use of motion primitives and RRTs to reduce search time is explored in \cite{vonasek2013global}. This approach reduces the number of iterations required to find a feasible path to the goal compared to using an unmodified RRT algorithm, but naturally limits the motion to being composed of a set of the defined primitives. Another approach in which RRTs were combined with motion primitives, \cite{shkolnik2011bounding}, was able to produce bounding motions in the quadruped LittleDog robot; however, the computation time was prohibitive for real-time applications. 

In \cite{manchester13planning}, the use of virtual holonomic constraints as motion primitives is presented. These primitives correspond to the continuous phase dynamics between each impact. There are numerous advantages to choosing primitives in this way which are explored in Section~\ref{sec:virtconstraint}. This choice of method for motion planning forms the basis for this thesis work.

\subsection{Optimal planning and control}
Much of the discussion in this chapter and in the literature that it surveys considers the planning and control problems separately. That is, a path is generated by the planner, possibly on the basis of some optimisation rule, which is then passed to the controller to regulate the motion. This presents a significant advantage in conceptually and computationally reducing autonomous motion generation to two distinct and simpler parts.

However, this approach has several limitations. In general there is no guarantee of the path being perfectly regulated by the controller. Any optimisation which is completed in the planning phase may be violated by the action of the controller. Additionally, an optimal path planner paired with an optimal controller does not necessarily produce an optimal system. This is particularly true if the path planner is not well matched to the capabilities of the controller, e.g. a planner which produces a piecewise linear path for a fixed-wing unmanned aerial vehicle.

There are several notable examples of attempts to produce combined approaches to optimising the planning and control of a system. For example, \cite{quinlan1993elastic} introduces the notion of \textit{elastic bands}; deformable collision-free paths which mutate in real-time on the basis of the sensor data. Although this approach was introduced two decades ago, planning and control continue to be considered somewhat separately in subsequent literature. This is largely due to the fact that it is usually possible to design the trajectory planner such that close regulation of the produced paths is possible. For example, the simplification of the control problem for vehicle path planning introduced by using omnidirectional control made it possible to use very simple ``bang-bang'' path planning methods which retained near-optimality \cite{kalmar2004near}.

In the case of path planning using primitives for underactuated systems, the motions may be shaped to allow for feasible control inputs to regulate the trajectories. This, coupled with the use of controllers designed for the regulation of virtual constraints, i.e. HZD-based \cite{sreenath2011compliant} or using transverse linearisation \cite{manchester2011stable}, allows for the planned motions to be regulated in a faithful manner. The path planner can therefore produce sequences of motion primitives with no explicit regard for their regulation using control.