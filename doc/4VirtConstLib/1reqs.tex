The utility of a library of motion primitives is dependent on the suitability of the gaits which may be produced by the composition of elements of the library to the terrain over which the robot must locomote. Furthermore, in order for an algorithm which chooses between the constraints within the library to realise the benefits of motion planning with primitives as discussed in Section \ref{sec:primplanning}, the constraints must be stored in a manner which enables the algorithm to intelligently discriminate between them. To comply with these conditions, the virtual constraint library must satisfy requirements which may be broadly classed as \textit{physical} and \textit{algorithmic}.

\subsection{Physical requirements}
The physical requirements on the library of motion primitives are those which relate to the physical admissibility and utility of each of the virtual constraints and of the library as a whole. The most obvious of these requirements is that each motion primitive must define a trajectory through the configuration space which is collision-free (aside from ground impact events) and avoids hyper-extension of joints. For saggital-plane planning, avoiding collisions is limited to ensuring that every point on the robot other than the stance foot is above the ground. The generalisation of this method into 3D requires checks for self-collisions over the primitive trajectory. There are also a number of conditions which must be satisfied by virtual constraints based upon ground impact events, which are presented in Section \ref{sec:impact}.

Along with the requirements placed on the individual primitives, the library itself must comply with several requirements to be practicable for walking over uneven terrain. Firstly, the virtual constraints within the library must constitute sufficient coverage over the motions required to traverse the uneven terrain. This includes the ability to step up and down, add and subtract kinetic energy, and to have a range of motions for each of these which allows successful completion of the trajectories without premature collision with the ground. Additionally, the library must be constructed such that constraints may be validly chosen to follow after one another. This implies that the invariance conditions discussed in Section \ref{sec:impact} are satisfied for pairs of consecutive constraints. The library must be designed such that each primitive has a rich choice of virtual constraints which can precede and succeed it.

\subsection{Algorithmic requirements} \label{sec:algreqs}
A useful virtual constraint library must be suited to the algorithm which selects primitives from within it. This is something of a ``chicken and egg'' scenario; the library must be structured to suit a selection algorithm, but this algorithm can only be designed on the basis of the data available in the library. Fortunately, it is possible to reason about the requirements of a selection algorithm \textit{a priori}.

Any selection algorithm will require data which allows the planner to evaluate the ability of the motion to be completed and to produce the admissible VCs following a particular primitive. This implies that the library must, for each constraint, contain $\Gamma(\theta^c)$ and $\Psi(\theta^c)$ and the start and end configurations of the constraint. We can additionally reason that the library must contain data sufficient to identify the constraint; clearly the Bézier coefficients which describe each primitive must be available. Encoding $\Gamma(\theta^+)$ and $\Psi(\theta^+)$ allows the motion planner to calculate the post-impact velocity, which is necessary for evaluating the critical velocity of a subsequent primitive.

Also, as discussed in Section \ref{sec:primplanning}, the structure of the library is important for enabling the algorithm to efficiently operate. For the sake of reducing on-line computation complexity, the library must be arranged in a manner which allows for impact configurations to be found efficiently. Sorting between like constraints and impact configurations also allows for search time to be reduced from linear- to log-time.

\subsection{Practical considerations}
A library satisfying the above requirements is sufficient to ensure that walking motions are in principle able to be generated for the set of applicable terrains, however there are additional considerations for a system to be useful in practice. Firstly, each constraint in the library should be chosen such that the required control input is reasonable; the constraint should be optimal or near-optimal under some optimisation rule which concerns the input torque. In addition, the primitives should be defined such that the level of control required is achievable. This implies that the virtual constraint's utility should not require large changes in torque over short periods of time, particularly near the impact conditions.

When considering the problem of producing virtual constraints defined by Bézier coefficients, it is necessary to justify the degree of the polynomials which are used. For simplicity of implementation, it is best that all constraints are constructed with the same degree. It is clear that increasing the number of Bézier coefficients increases the computation time, particularly in the production of the library. Therefore, the degree of the polynomial should be kept as low as possible while still allowing for constraints to be flexibly defined.